{% extends "base.html" %}
{% load static %}
{% block content %}
  <div class="row">
    <div class="col-sm-12">
      <h5>Task description</h5>
      <hr>
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
          <a class="nav-link active text-uppercase" id="description-tab" data-toggle="tab" role="tab" 
             aria-controls="description" aria-selected="true" href="#description">{{ task.name }}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-uppercase" id="worker-tab" data-toggle="tab" role="tab" href="#worker"
            aria-controls="worker" aria-selected="false">Employees involved</a>
        </li>
        {% if task in user.assignees.all %}
        	<li>
            <a href="{% url 'manager:add-remove-from-task' pk=task.id %}" class="btn btn-outline-danger">
              Quit Task
            </a>
          </li>
        {% else %}
          <li>
            <a href="{% url 'manager:add-remove-from-task' pk=task.id %}" class="btn btn-outline-success">
              Join the assignment
            </a>
          </li>
        {% endif %} 
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description">
          <p class="mb-0">
            {{ task.description }}
          </p>
        </div>
        <div class="tab-pane fade" id="worker" role="tabpanel" aria-labelledby="worker">
          {% for worker in task.assignees.all %}
            {% if worker.first_name %}
            	<p class="mb-0">
                {{ worker.first_name }}
              </p>
            {% else %}
              <p class="mb-0">
                {{ worker.username }}
              </p>
            {% endif %} 
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}